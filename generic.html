<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia Site Renderer 1.3 at May 19, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>op4j: bending the Java spoon - Working with objects of any type</title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20120519" />
    <meta http-equiv="Content-Language" content="en" />
                                                    

        </head>
  <body class="composite">
    <div id="banner">
                                      <a href="./" id="bannerLeft">
                                                <img src="images/op4j_logo.png" alt="op4j: bending the Java spoon" />
                </a>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                    
                <div class="xleft">
        <span id="publishDate">Last Published: 19 May 2012</span>
                  &nbsp;| <span id="projectVersion">Version: 1.2</span>
                      </div>
            <div class="xright">                    <a href="index.html" title="Main">Main</a>
            |
                        <a href="download.html" title="Download">Download</a>
            |
                        <a href="https://www.bendingthejavaspoon.com" class="externalLink" title="Example Recipes Blog">Example Recipes Blog</a>
            |
                        <a href="https://github.com/op4j/op4j.github.com/issues" class="externalLink" title="Issue Tracking">Issue Tracking</a>
            |
                        <a href="apidocs/index.html" title="Javadoc">Javadoc</a>
            |
                        <a href="https://github.com/op4j" class="externalLink" title="Github Project Page">Github Project Page</a>
              
                    
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                    
                                <h5>The op4j Project</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="· Main">· Main</a>
            </li>
                  <li class="none">
                          <a href="download.html" title="· Download">· Download</a>
            </li>
                  <li class="none">
                          <a href="maveninfo.html" title="· Maven Info">· Maven Info</a>
            </li>
                  <li class="none">
                          <a href="dependencies.html" title="· Dependencies">· Dependencies</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/op4j" class="externalLink" title="· Github Repository">· Github Repository</a>
            </li>
                  <li class="none">
                          <a href="https://www.bendingthejavaspoon.com" class="externalLink" title="· Example Recipes">· Example Recipes</a>
            </li>
                  <li class="none">
                          <a href="https://github.com/op4j/op4j.github.com/issues" class="externalLink" title="· Issue Tracking">· Issue Tracking</a>
            </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <li class="expanded">
                          <a href="#" title="· Documentation">· Documentation</a>
                    <ul>
                      <li class="none">
                          <a href="basics.html" title="· The Basics">· The Basics</a>
            </li>
                                                                                                                                                    <li class="expanded">
                          <a href="#" title="· Working with...">· Working with...</a>
                    <ul>
                      <li class="none">
                          <a href="arrays.html" title="· Arrays">· Arrays</a>
            </li>
                      <li class="none">
                          <a href="lists.html" title="· Lists">· Lists</a>
            </li>
                      <li class="none">
                          <a href="maps.html" title="· Maps">· Maps</a>
            </li>
                      <li class="none">
                          <a href="sets.html" title="· Sets">· Sets</a>
            </li>
                      <li class="none">
            <strong>· Any object (generic)</strong>
          </li>
              </ul>
        </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <li class="expanded">
                          <a href="#" title="· Functions">· Functions</a>
                    <ul>
                      <li class="none">
                          <a href="functions.html" title="· About Functions">· About Functions</a>
            </li>
                      <li class="none">
                          <a href="call.html" title="· Call">· Call</a>
            </li>
                      <li class="none">
                          <a href="get.html" title="· Get">· Get</a>
            </li>
                      <li class="none">
                          <a href="fnfunc.html" title="· FnFunc">· FnFunc</a>
            </li>
                      <li class="none">
                          <a href="fnboolean.html" title="· FnBoolean">· FnBoolean</a>
            </li>
                      <li class="none">
                          <a href="fncalendar.html" title="· FnCalendar">· FnCalendar</a>
            </li>
                      <li class="none">
                          <a href="fndate.html" title="· FnDate">· FnDate</a>
            </li>
                      <li class="none">
                          <a href="fnobject.html" title="· FnObject">· FnObject</a>
            </li>
                      <li class="none">
                          <a href="fnstring.html" title="· FnString">· FnString</a>
            </li>
                                                                                                                                                                                                <li class="expanded">
                          <a href="#" title="· Numbers">· Numbers</a>
                    <ul>
                      <li class="none">
                          <a href="fnnumber.html" title="· FnNumber">· FnNumber</a>
            </li>
                      <li class="none">
                          <a href="fnbigdecimal.html" title="· FnBigDecimal">· FnBigDecimal</a>
            </li>
                      <li class="none">
                          <a href="fnbiginteger.html" title="· FnBigInteger">· FnBigInteger</a>
            </li>
                      <li class="none">
                          <a href="fninteger.html" title="· FnInteger">· FnInteger</a>
            </li>
                      <li class="none">
                          <a href="fnlong.html" title="· FnLong">· FnLong</a>
            </li>
                      <li class="none">
                          <a href="fnfloat.html" title="· FnFloat">· FnFloat</a>
            </li>
                      <li class="none">
                          <a href="fndouble.html" title="· FnDouble">· FnDouble</a>
            </li>
                      <li class="none">
                          <a href="fndouble.html" title="· FnShort">· FnShort</a>
            </li>
              </ul>
        </li>
                                                                                                                                          <li class="expanded">
                          <a href="#" title="· Structures">· Structures</a>
                    <ul>
                      <li class="none">
                          <a href="fnarray.html" title="· FnArray">· FnArray</a>
            </li>
                      <li class="none">
                          <a href="fnlist.html" title="· FnList">· FnList</a>
            </li>
                      <li class="none">
                          <a href="fnmap.html" title="· FnMap">· FnMap</a>
            </li>
                      <li class="none">
                          <a href="fnset.html" title="· FnSet">· FnSet</a>
            </li>
                      <li class="none">
                          <a href="fntuple.html" title="· FnTuple">· FnTuple</a>
            </li>
              </ul>
        </li>
              </ul>
        </li>
                      <li class="none">
                          <a href="apidocs/op4j/index.html" title="· Javadoc">· Javadoc</a>
            </li>
                      <li class="none">
                          <a href="faq.html" title="· FAQ">· FAQ</a>
            </li>
              </ul>
        </li>
                  <li class="none">
                          <a href="license.html" title="· License">· License</a>
            </li>
                  <li class="none">
                          <a href="team.html" title="· Team">· Team</a>
            </li>
          </ul>
                  <ul>
                                                                                                              <li class="collapsed">
                          <a href="ognl-about.html" title="· op4j-ognl">· op4j-ognl</a>
                  </li>
                                                                                                                                                                                                                                            <li class="collapsed">
                          <a href="jodatime-about.html" title="· op4j-jodatime">· op4j-jodatime</a>
                  </li>
          </ul>
                                                                                                                               <a href="https://maven.apache.org" title="Built with Maven 2" class="poweredBy">
        <img class="poweredBy"  alt="Built with Maven 2" src="https://maven.apache.org/images/logos/maven-feather.png"     />
      </a>
                       
                    
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Working with objects of any type (generic operators)<a name="Working_with_objects_of_any_type_generic_operators"></a></h2><p>A <i>generic operator</i> is what you will get when creating an expression (<tt>Op.on(...)</tt> or <tt>Fn.on(...)</tt>) on any object which is not an array, a list, a map or a set. This is, an operator which will let you execute actions on your objects, but not offer any special built-in features like iterating with <i>forEach()</i>.</p><ul><li><a href="#a1">Creating generic expressions</a></li><li><a href="#a2">Returning results</a></li><li><a href="#a3">Converting to arrays, lists, sets or maps</a></li><li><a href="#a4">Executing functions</a></li><li><a href="#a5">Selecting (conditional code)</a></li><li><a href="#a6">Replacing</a></li></ul><div class="section"><h3><a name="a1">1</a>. Creating generic expressions<a name="a1._Creating_generic_expressions"></a></h3><div class="section"><h4>Operation expressions<a name="Operation_expressions"></a></h4><p>Generic operation expressions are created on an object which is neither an array, nor a list, map or set:</p><div class="source"><pre>Op.on(object)...
</pre></div><p>Also, any operator on arrays, lists, maps or sets can be turned into a generic operator by executing the <i>generic()</i> action:</p><div class="source"><pre>Op.onList(...).generic().[GENERIC ACTIONS]...
</pre></div></div><div class="section"><h4>Function expressions<a name="Function_expressions"></a></h4><p>Function expressions are created by specifying the input type:</p><div class="source"><pre>// Create a function which receives a String variable as input
function = Fn.on(Types.STRING)...get();
</pre></div></div></div><div class="section"><h3><a name="a2">2</a>. Returning results<a name="a2._Returning_results"></a></h3><p>Generic operators, as all others, return their results by means of the <tt>get()</tt> action:</p><div class="source"><pre>newObject = Op.on(object)...get();
</pre></div></div><div class="section"><h3><a name="a3">3</a>. Converting to arrays, lists, sets or maps<a name="a3._Converting_to_arrays_lists_sets_or_maps"></a></h3><p>Generic operators can convert their targets into <i>singleton</i> arrays, lists, sets or maps. This means creating one of these structures and then adding only one element (the target) to them.</p><div class="section"><h4>Arrays<a name="Arrays"></a></h4><p>For creating a singleton array:</p><div class="source"><pre>String[] array = Op.on(str).intoSingletonArrayOf(Types.STRING).get();
</pre></div></div><div class="section"><h4>Lists<a name="Lists"></a></h4><p>For creating a singleton list:</p><div class="source"><pre>List&lt;String&gt; list = Op.on(str).intoSingletonList().get();
</pre></div></div><div class="section"><h4>Sets<a name="Sets"></a></h4><p>For creating a singleton set:</p><div class="source"><pre>Set&lt;String&gt; set = Op.on(str).intoSingletonSet().get();
</pre></div></div><div class="section"><h4>Maps<a name="Maps"></a></h4><p>Maps are a little bit trickier, because each <i>element</i> of a map (a <i>map entry</i>) is in fact composed of two objects instead of one: a <i>key</i>, and a <i>value</i>.</p><p>That is why, in order to obtain a map with a single entry from the generic operator's target, we will have to either apply a <i>map builder</i> function, or simply add (<i>zip</i>) another object as key or value. </p><div class="section"><h5>Using a Map Builder<a name="Using_a_Map_Builder"></a></h5><p>A Map Builder is an function which returns map entries (<tt>IFunction&lt;T,Map.Entry&lt;K,V&gt;&gt;</tt>), usually created by extending the abstract class <tt>org.op4j.functions.MapBuilder</tt>, and which provides op4j with a way of creating a map entry from each of the list's elements.</p><p><tt>MapBuilder</tt> looks like this:</p><div class="source"><pre>public abstract class MapBuilder&lt;T,K,V&gt; implements IFunction&lt;T,Map.Entry&lt;K,V&gt;&gt; {
    public abstract K buildKey(final T target);
    public abstract V buildValue(final T target);
    ...
}
</pre></div><p>Let's use it for creating our singleton map: </p><div class="source"><pre>MapBuilder&lt;String,Integer,Calendar&gt; mapBuilder = ...;
Map&lt;Integer,Calendar&gt; map = Op.on(str).intoSingletonMap(mapBuilder).get();
</pre></div></div><div class="section"><h5>Zipping key or value<a name="Zipping_key_or_value"></a></h5><p>The singleton map can also be created by zipping. This means either considering the generic operator's target object as a key and then adding (zipping) a value, or the opposite.</p><p>Let's add the value:</p><div class="source"><pre>// map = {{1=&quot;a&quot;}}
Map&lt;Integer,String&gt; map = Op.on(1).zipValue(&quot;a&quot;).get();
</pre></div><p>Or the contrary:</p><div class="source"><pre>// map = {{&quot;a&quot;=1}}
Map&lt;String,Integer&gt; map = Op.on(1).zipKey(&quot;a&quot;).get();
</pre></div><p>Alternatively, a function can be used for evaluating the target object and obtaining the zipped key or value:</p><div class="source"><pre>IFunction&lt;Integer,String&gt; valueEvaluatorFn = ...;
Map&lt;Integer,String&gt; map = Op.on(1).zipValueBy(valueEvaluatorFn).get();
</pre></div><div class="source"><pre>IFunction&lt;Integer,String&gt; keyEvaluatorFn = ...;
Map&lt;String,Integer&gt; map = Op.on(1).zipKeyBy(keyEvaluatorFn).get();
</pre></div></div></div></div><div class="section"><h3><a name="a4">4</a>. Executing functions<a name="a4._Executing_functions"></a></h3><p>In generic operators, functions are executed the usual way:</p><div class="source"><pre>String upperStr = Op.on(&quot;a String&quot;).exec(FnString.toUpperCase()).get();
</pre></div><p>A condition can be added for <i>null-saving</i> a function execution, if needed:</p><div class="source"><pre>String upperStr = Op.on(str).execIfNotNull(FnString.toUpperCase()).get();
</pre></div></div><div class="section"><h3><a name="a5">5</a>. Selecting (conditional code)<a name="a5._Selecting_conditional_code"></a></h3><p>op4j allows the conditional execution of actions. Once the condition (an action starting with &quot;<tt>if</tt>&quot;) is executed, all subsequent actions will apply only on the target object only if it has been selected (condition was true).</p><p>For example, lets convert into upper case only if the String value is not &quot;uncapitalizable&quot;.</p><div class="source"><pre>String upper = 
    Op.on(str).ifTrue(FnString.notEq(&quot;uncapitalizable&quot;)).exec(FnString.toUpperCase()).get();
</pre></div><p>As usual, selections can be ended with <tt>endIf(...)</tt>:</p><div class="source"><pre>Op.on(...).ifTrue(...).[ACTIONS ON SELECTED ELEMENTS].endIf()...
</pre></div><div class="section"><h4>Types of selection actions<a name="Types_of_selection_actions"></a></h4><p>Selection can be based on the nullity of the target: </p><div class="source"><pre>Op.on(...).ifNull()....
Op.on(...).ifNotNull()....
</pre></div><p>And also on the value returned by the evaluation of a function returning <tt>Boolean</tt>:</p><div class="source"><pre>IFunction&lt;T,Boolean&gt; eval = ...;
...
Op.on(...).ifTrue(eval)...
Op.on(...).ifFalse(eval)...
</pre></div></div><div class="section"><h4>Restricions on execution actions after selection<a name="Restricions_on_execution_actions_after_selection"></a></h4><p>After executing a selection action, function executed by means of an <i>exec</i> action cannot change the operator type.</p><p>So this would not be valid:</p><div class="source"><pre>// Will not compile!
Integer intObj = 
    Op.on(str).ifTrue(FnString.notEq(&quot;-&quot;)).exec(FnString.toInteger()).get();
</pre></div><p>...because converting the operator target only <i>sometimes</i> (if some condition is true) means that the real type of the target object cannot be known after executing.</p></div></div><div class="section"><h3><a name="a6">6</a>. Replacing<a name="a6._Replacing"></a></h3><p>Operator targets can be replaced by other objects:</p><div class="source"><pre>String newString = 
    Op.on(str).ifNull().replaceWith(&quot;[no value]&quot;).get();
</pre></div><p>...which is equivalent to:</p><div class="source"><pre>String newString = 
    Op.on(str).replaceIfNotNullWith(&quot;[no value]&quot;).get();
</pre></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                    2012
                        <a href="https://www.op4j.org">The OP4J team</a>.
            All Rights Reserved.      
                    
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
